<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ms.popo</title>
    <link rel="stylesheet" href="css/all.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.css" />
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
    <script src="js/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
</head>
<body>
    <div class="wrap">
        <header class="header">
            <div class="phone">
                <h1><a href="#">Ms.popo</a></h1>
                <div class="smun"><a href="#"><img src="img/menu.png" alt="menu"></a></div>
            </div>
            <ul class="menu">
                <li><a href="index.html">首頁</a></li>
                <li><a href="goods.html">商城</a></li>
                <li><a href="about.html">關於我們</a></li>
                <li ><a href="#">購物車</a></li>
                <li><a href="#" class="phonesize">會員中心</a></li>
            </ul>
        </header>
        <div class="phonestyle"></div>
        <!-- <div class="sign">
            <img src="img/logo.jpg" alt="">
            <div class="username">
                <i class="fas fa-user"></i>
                <input type="text" name="" id="" placeholder="輸入帳號">
            </div>
            <div class="password">
                <i class="fas fa-lock"></i>
                <input type="password" name="" id="" placeholder="輸入密碼">
            </div>
            <div class="sigm_in">
                <input type="submit" value="登入">
            </div>
        </div> -->
        <div id="app" class="container" style="margin-top: 150px; margin-bottom: 30px;">
            <div class="card text-center">
                <h5 class="card-header">註冊</h5>
                <div class="card-body">
                    <form v-on:submit.prevent="signUp" action="">
                        <div class="form-group">
                            <label for="">
                                <i class="bi bi-envelope"></i>電子郵件信箱:
                            </label><br>
                            <input type="text" v-model="email" placeholder="example@mailserver"><br>
                        </div>
                        <div class="form-group">
                            <label for="">
                                <i class="bi bi-key"></i>密碼:
                            </label><br>
                            <input type="password" v-model="password" placeholder="請輸入您的密碼">
                        </div>
                        <div class="form-group">
                            <input type="submit" class="btn btn-success" value="Sign Up">
                        </div>
                        <p>如果您已經有帳號了，請直接點選
                            <a href="sign_in.html">登入</a>
                        </p>
                    </form>
                </div>
            </div>
        </div>
        
        
    </div>
    <ul class="footer">
        <li class="mspopo">
            <img src="img/footlogo.jpg" alt="footlogo">
            <p class="add"><img src="img/location.png" alt="location">一中街173號 巷弄廣場</p>
            <p class="line"><img src="img/line.png" alt="line">@jkh1140c</p>
            <hr>
            <span>Copyright © Ms.popo 波波妞</span>
        </li>
        <ul class="footermenu">
            
            <li>
                <a href="#"><h5>商城</h5></a>
                <a href="#">新品</a>
                <a href="#">短袖</a>
                <a href="#">短褲</a>
                <a href="#">長袖</a>
                <a href="#">長褲</a>
                <a href="#">褲子</a>
                <a href="#">配件</a>
            </li>
            <li>
                <a href="#"><h5>關於我們</h5></a>
                <a href="#">如何聯繫我們</a>
            </li>
            <li>
                <a href="#"><h5>購物車</h5></a>
                <a href="#">查看購物車</a>
                <a href="#">清空購物車</a>
            </li>
            <li>
                <a href="#"><h5>會員中心</h5></a>
                <a href="#">會員登入</a>
            </li>
            
        </ul>
    </ul>
    <script src="https://unpkg.com/swiper/swiper-bundle.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="js/all.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.13/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue-firestore"></script>
    <script src="https://unpkg.com/moment"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.1/vue-router.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.2/firebase-ui-auth__zh_tw.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.2/firebase-ui-auth.css" />
    <!-- <script src="https://www.gstatic.com/firebasejs/5.5.6/firebase.js"></script> -->
    <!-- Insert this script at the bottom of the HTML, but before you use any Firebase services -->
    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-analytics.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-database.js"></script>
    <script src="https://unpkg.com/vuefire/dist/vuefire.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBszkT-QMgYBy0LvtyKmNzGfoLORojg-jg",
            authDomain: "shopping-43fa0.firebaseapp.com",
            projectId: "shopping-43fa0",
            storageBucket: "shopping-43fa0.appspot.com",
            messagingSenderId: "992717455588",
            appId: "1:992717455588:web:2bc88b2fe3b49a6fd4ecf1",
            measurementId: "G-DGXMDJ6GE7"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        var ui = new firebaseui.auth.AuthUI(firebase.auth());

        new Vue({
            el: '#app',
            data: {
                issignedin: false,
                displayname: '',
                photoURL: '',
                email: '',
                phone: ''
            },
            mounted() {
                ui.start('#firebaseui-auth-container', this.getUiConfig());

                firebase.auth().onAuthStateChanged((user) => {
                    if (user) {
                        this.issignedin = true
                        this.displayname = user.displayname
                        this.email = user.email
                        this.photoURL = user.photoURL
                        this.phone = user.phoneNumber
                    }
                })
            },
            methods: {
                signInWithGoogle() {
                    const provider = new firebase.auth.GoogleAuthProvider()
                    firebase.auth().signInWithRedirect(provider).then((result) => {

                    }).catch(err => console.log(err))
                },
                signOut() {
                    firebase.auth().signOut().then(() => {
                        this.phone = null
                        this.displayname = ''
                        this.email = ''
                        this.photoURL = null
                        this.issignedin = false
                    }).catch(err => console.log(err))
                    
                    // ui.start('#firebaseui-auth-container', this.getUiConfig());

                },
                getUiConfig() {
                    return {
                        'callbacks': {
                            'signInSuccessWithAuthResult': function (user, authResult, redirectUrl) {
                                this.issignedin = true
                                this.displayname = user.displayName
                                this.phone = user.phoneNumber
                                this.email = user.email
                                this.photoURL = user.photoURL

                                return false;
                            }
                        },
                        'signInFlow': 'popup',
                        'signInOptions': [
                            firebase.auth.GoogleAuthProvider.PROVIDER_ID,
                            // firebase.auth.FacebookAuthProvider.PROVIDER_ID,
                            // firebase.auth.TwitterAuthProvider.PROVIDER_ID,
                            // firebase.auth.GithubAuthProvider.PROVIDER_ID,
                            firebase.auth.EmailAuthProvider.PROVIDER_ID,
                            {
                                provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,
                                recaptchaParameters: {
                                    type: 'image',
                                    size: 'invisible',
                                    badge: 'bottomleft'
                                },
                                defaultCountry: 'TW',
                            }
                        ],
                        'tosUrl': 'https://www.google.com',
                        'privacyPolicyUrl': 'https://www.google.com'
                    };
                },
                signUp() {
                    firebase.auth().createUserWithEmailAndPassword(this.email, this.password).then(
                        user => {
                            // this.$router.replace("collection");
                            alert('已註冊成功，請點及登入按鈕!!')
                        },
                        err => {
                            alert("Oops. " + err.message);
                        }
                    )
                }

            }
        })



    </script>
</body>
</html>